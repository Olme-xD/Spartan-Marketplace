<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/x-icon" href="../customer/images/img_test.ico" />
    <title>Craig List — New / Edit Listing</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet" />
    <style>
        body {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        main {
            flex-grow: 1;
        }
    </style>
</head>

<body class="bg-light text-dark d-flex flex-column min-vh-100">

    <!-- Navbar (provider) -->
    <div class="sticky-top container-fluid bg-dark text-light">
        <header class="d-flex justify-content-between align-items-center py-1">
            <a href="../customer/index.html">
                <img style="width:70px;height:70px" src="../customer/images/img_test.png" alt="Logo"
                    class="img-fluid" />
            </a>
            <form class="col-md-4 d-flex" role="search" onsubmit="event.preventDefault()">
                <input class="form-control rounded-pill me-2" type="search" placeholder="Search" />
                <button class="btn btn-outline-light rounded-pill" type="submit">Search</button>
            </form>
            <nav class="d-flex align-items-center">
                <a href="dashboard.html" class="text-light text-decoration-none me-3">
                    <i class="bi bi-person-circle" style="font-size:30px"></i>
                </a>
                <a href="dashboard.html" class="text-light text-decoration-none me-3">Dashboard</a>
                <a href="messages.html" class="text-light text-decoration-none me-3">Messages</a>
                <a href="notifications.html" class="text-light text-decoration-none me-3">Notifications</a>
                <a href="rating.html" class="text-light text-decoration-none me-3">Ratings</a>
                <a href="../customer/index.html" class="btn btn-outline-light rounded-pill">Logout</a>
            </nav>
        </header>
    </div>

    <!-- Main -->
    <main class="container py-4">
        <h1 id="pageTitle" class="h4 mb-3">Create a New Listing</h1>
        <div id="editingBadge" class="badge text-bg-secondary mb-3 d-none"></div>

        <form id="listingForm" class="bg-white p-4 rounded shadow-sm" onsubmit="event.preventDefault(); handleSave();">
            <div class="row g-3">
                <div class="col-md-8">
                    <label class="form-label">Title</label>
                    <input id="title" class="form-control" placeholder="e.g., 2020 MacBook Pro" />
                </div>
                <div class="col-md-4">
                    <label class="form-label">Price</label>
                    <div class="input-group">
                        <span class="input-group-text">$</span>
                        <input id="price" type="number" min="0" step="1" class="form-control" value="1200" />
                    </div>
                </div>

                <div class="col-md-6">
                    <label class="form-label">Category</label>
                    <select id="category" class="form-select">
                        <option value="" disabled selected>Choose…</option>
                        <option>Electronics</option>
                        <option>Vehicles</option>
                        <option>Furniture</option>
                        <option>Clothing</option>
                        <option>Books</option>
                        <option>Real Estate</option>
                        <option>Services</option>
                        <option>Miscellaneous</option>
                    </select>
                </div>
                <div class="col-md-6">
                    <label class="form-label">Contact Email</label>
                    <input id="email" type="email" class="form-control" placeholder="seller@example.com" />
                </div>

                <div class="col-12">
                    <label class="form-label">Description</label>
                    <textarea id="description" class="form-control" rows="5"
                        placeholder="Write a clear description"></textarea>
                </div>

                <div class="col-12">
                    <label class="form-label">Images</label>
                    <input id="images" type="file" class="form-control" multiple />
                    <div class="form-text">Image upload is simulated in this prototype.</div>
                </div>
            </div>

            <div class="mt-3 d-flex gap-2">
                <button id="submitBtn" class="btn btn-success" type="submit">Save Listing</button>
                <a class="btn btn-outline-secondary" href="dashboard.html#manage">Cancel</a>
            </div>
        </form>
    </main>

    <!-- Footer -->
    <footer class="bg-dark text-light text-center py-3 mt-4">
        <p class="mb-0">&copy; 2025 Craig List App</p>
    </footer>

    <script>
        // --- Mock data to prefill on edit ---
        const MOCK_LISTINGS = {
            1: {
                title: "Gaming Laptop",
                price: 1200,
                category: "Electronics",
                email: "seller@example.com",
                description: "High-performance gaming laptop with the latest specs."
            },
            2: {
                title: "Mountain Bike",
                price: 450,
                category: "Vehicles",
                email: "seller@example.com",
                description: "A sturdy mountain bike suitable for all terrains. Recently serviced."
            },
            3: {
                title: "Dining Table Set",
                price: 300,
                category: "Furniture",
                email: "seller@example.com",
                description: "Elegant dining table set with 6 chairs."
            }
        };

        const qs = new URLSearchParams(window.location.search);
        const editId = qs.get("id"); // if present → edit mode

        function prefillIfEditing() {
            if (!editId) return; // new mode

            const data = MOCK_LISTINGS[editId];
            if (!data) return;

            // Switch UI to "Edit" mode
            document.title = "Craig List — Edit Listing";
            document.getElementById("pageTitle").textContent = "Edit Listing";
            document.getElementById("submitBtn").textContent = "Update Listing";

            const badge = document.getElementById("editingBadge");
            badge.textContent = `Editing: ${data.title}`;
            badge.classList.remove("d-none");

            // Prefill fields
            document.getElementById("title").value = data.title;
            document.getElementById("price").value = data.price;
            document.getElementById("category").value = data.category;
            document.getElementById("email").value = data.email;
            document.getElementById("description").value = data.description;
        }

        function handleSave() {
            if (editId) {
                alert("Listing updated (prototype). Returning to Manage Listings.");
            } else {
                alert("Listing created (prototype). Returning to Manage Listings.");
            }
            // Go back to Manage tab in the dashboard
            window.location.href = "dashboard.html#manage";
        }

        // Init
        prefillIfEditing();
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>