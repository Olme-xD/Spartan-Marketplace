<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/x-icon" href="images/img_test.ico" />
    <title>Craig List â€” Profile</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet" />
    <style>
        body {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        main {
            flex-grow: 1;
        }

        .avatar {
            width: 96px;
            height: 96px;
            border-radius: 50%;
            object-fit: cover;
            background: #e9ecef;
            border: 3px solid #fff;
            box-shadow: 0 2px 6px rgba(0, 0, 0, .08);
        }

        .muted-label {
            width: 140px;
            color: #6c757d;
        }

        /* --- Ratings tab small helpers --- */
        .rating-star {
            color: #ffc107;
        }

        .review-snippet {
            max-width: 520px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
    </style>
</head>

<body class="bg-light text-dark d-flex flex-column min-vh-100">

    <!-- Sticky navbar -->
    <div class="sticky-top container-fluid bg-dark text-light">
        <header class="d-flex justify-content-between align-items-center py-1">
            <a href="index.html">
                <img style="width:70px;height:70px" src="images/img_test.png" alt="Logo" class="img-fluid" />
            </a>
            <form class="col-md-4 d-flex" role="search" onsubmit="event.preventDefault()">
                <input class="form-control rounded-pill me-2" type="search" placeholder="Search" aria-label="Search" />
                <button class="btn btn-outline-light rounded-pill" type="submit">Search</button>
            </form>
            <nav class="d-flex align-items-center">
                <a href="profile.html" class="text-light text-decoration-none me-3">
                    <i class="bi bi-person-circle" style="font-size:30px"></i>
                </a>
                <a href="profile.html" class="text-light text-decoration-none me-3">Profile</a>
                <a href="dashboard.html" class="text-light text-decoration-none me-3">Dashboard</a>
                <a href="messages.html" class="text-light text-decoration-none me-3">Messages</a>
                <a href="notifications.html" class="text-light text-decoration-none me-3">Notifications</a>
                <a href="rating.html" class="text-light text-decoration-none me-3">Ratings</a>
                <a href="index.html" class="btn btn-outline-light rounded-pill">Logout</a>
            </nav>
        </header>
    </div>

    <!-- Main -->
    <main class="container py-4">

        <!-- Header -->
        <div class="d-flex flex-column align-items-center text-center mb-4">
            <img class="avatar" src="images/img_test.png" alt="Profile Avatar" />
            <h1 class="h4 mt-3 mb-1">Jane Doe</h1>
            <div class="text-muted">janedoe@example.com</div>
        </div>

        <!-- Tabs -->
        <ul class="nav nav-pills justify-content-center mb-3" id="profileTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="overview-tab" data-bs-toggle="pill" data-bs-target="#overview"
                    type="button" role="tab" aria-controls="overview" aria-selected="true">
                    <i class="bi bi-person-badge me-1"></i> Overview
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="settings-tab" data-bs-toggle="pill" data-bs-target="#settings"
                    type="button" role="tab" aria-controls="settings" aria-selected="false">
                    <i class="bi bi-gear me-1"></i> Settings
                </button>
            </li>
            <!-- NEW: Ratings tab -->
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="ratings-tab" data-bs-toggle="pill" data-bs-target="#ratings" type="button"
                    role="tab" aria-controls="ratings" aria-selected="false">
                    <i class="bi bi-star me-1"></i> Ratings
                </button>
            </li>
        </ul>

        <div class="tab-content">

            <!-- OVERVIEW (Profile display) -->
            <section class="tab-pane fade show active" id="overview" role="tabpanel" aria-labelledby="overview-tab">
                <div class="row g-3">
                    <!-- Public profile card -->
                    <div class="col-lg-6">
                        <div class="card shadow-sm">
                            <div class="card-body">
                                <h2 class="h6 mb-3">Public Profile</h2>
                                <div class="d-flex mb-2">
                                    <div class="muted-label">Full Name</div>
                                    <div>Jane Doe</div>
                                </div>
                                <div class="d-flex mb-2">
                                    <div class="muted-label">Member Since</div>
                                    <div>Jan 2024</div>
                                </div>
                                <div class="d-flex mb-2">
                                    <div class="muted-label">Location</div>
                                    <div>Greensboro, NC</div>
                                </div>
                                <div class="d-flex mb-2">
                                    <div class="muted-label">Bio</div>
                                    <div>Weekend thrifter. I sell tech and furniture in great condition.</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Quick stats -->
                    <div class="col-lg-6">
                        <div class="row g-3">
                            <div class="col-sm-6">
                                <div class="card shadow-sm">
                                    <div class="card-body d-flex align-items-center gap-3">
                                        <span class="btn btn-light disabled"><i class="bi bi-card-list"></i></span>
                                        <div>
                                            <div class="text-muted small">Active Listings</div>
                                            <div class="fs-4 fw-semibold">3</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="card shadow-sm">
                                    <div class="card-body d-flex align-items-center gap-3">
                                        <span class="btn btn-light disabled"><i class="bi bi-eye"></i></span>
                                        <div>
                                            <div class="text-muted small">Profile Views</div>
                                            <div class="fs-4 fw-semibold">156</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="card shadow-sm">
                                    <div class="card-body d-flex align-items-center gap-3">
                                        <span class="btn btn-light disabled"><i class="bi bi-chat-dots"></i></span>
                                        <div>
                                            <div class="text-muted small">Messages</div>
                                            <div class="fs-4 fw-semibold">5</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="card shadow-sm">
                                    <div class="card-body d-flex align-items-center gap-3">
                                        <span class="btn btn-light disabled"><i class="bi bi-star"></i></span>
                                        <div>
                                            <div class="text-muted small">Avg. Rating</div>
                                            <div class="fs-4 fw-semibold">4.2</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </section>

            <!-- SETTINGS (Account settings) -->
            <section class="tab-pane fade" id="settings" role="tabpanel" aria-labelledby="settings-tab">
                <div class="row g-3">
                    <!-- Account info -->
                    <div class="col-lg-7">
                        <form class="card shadow-sm" onsubmit="event.preventDefault(); alert('Saved (prototype)');">
                            <div class="card-body">
                                <h2 class="h6 mb-3">Account Information</h2>
                                <div class="row g-3">
                                    <div class="col-sm-6">
                                        <label class="form-label">First Name</label>
                                        <input class="form-control" value="Jane" />
                                    </div>
                                    <div class="col-sm-6">
                                        <label class="form-label">Last Name</label>
                                        <input class="form-control" value="Doe" />
                                    </div>
                                    <div class="col-12">
                                        <label class="form-label">Email</label>
                                        <input type="email" class="form-control" value="janedoe@example.com" />
                                    </div>
                                    <div class="col-12">
                                        <label class="form-label">Phone</label>
                                        <input type="tel" class="form-control" placeholder="(123) 456-7890" />
                                    </div>
                                    <div class="col-12">
                                        <label class="form-label">Location</label>
                                        <input class="form-control" placeholder="City, State" value="Greensboro, NC" />
                                    </div>
                                    <div class="col-12">
                                        <label class="form-label">Bio</label>
                                        <textarea class="form-control" rows="3"
                                            placeholder="Write something about yourselfâ€¦">Weekend thrifter. I sell tech and furniture in great condition.</textarea>
                                    </div>
                                </div>
                            </div>
                            <div class="card-footer bg-white d-flex gap-2">
                                <button class="btn btn-primary" type="submit">Save Changes</button>
                                <button class="btn btn-outline-secondary" type="reset">Cancel</button>
                            </div>
                        </form>
                    </div>

                    <!-- Avatar / password / prefs -->
                    <div class="col-lg-5">
                        <!-- Avatar -->
                        <form class="card shadow-sm mb-3"
                            onsubmit="event.preventDefault(); alert('Avatar updated (prototype)');">
                            <div class="card-body">
                                <h2 class="h6 mb-3">Profile Photo</h2>
                                <div class="d-flex align-items-center gap-3">
                                    <img class="avatar" src="images/img_test.png" alt="Avatar Preview" />
                                    <div class="flex-grow-1">
                                        <input type="file" class="form-control" />
                                        <div class="form-text">Upload is simulated for the prototype.</div>
                                    </div>
                                </div>
                            </div>
                            <div class="card-footer bg-white">
                                <button class="btn btn-outline-primary btn-sm" type="submit">Update Photo</button>
                            </div>
                        </form>

                        <!-- Change password -->
                        <form class="card shadow-sm mb-3"
                            onsubmit="event.preventDefault(); alert('Password changed (prototype)');">
                            <div class="card-body">
                                <h2 class="h6 mb-3">Change Password</h2>
                                <div class="mb-3">
                                    <label class="form-label">Current Password</label>
                                    <input type="password" class="form-control" />
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">New Password</label>
                                    <input type="password" class="form-control" />
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Confirm New Password</label>
                                    <input type="password" class="form-control" />
                                </div>
                                <button class="btn btn-outline-primary btn-sm" type="submit">Update Password</button>
                            </div>
                        </form>

                        <!-- Preferences -->
                        <form class="card shadow-sm"
                            onsubmit="event.preventDefault(); alert('Preferences saved (prototype)');">
                            <div class="card-body">
                                <h2 class="h6 mb-3">Preferences</h2>
                                <div class="form-check form-switch mb-2">
                                    <input class="form-check-input" type="checkbox" id="emailMsgs" checked />
                                    <label class="form-check-label" for="emailMsgs">Email me when I receive a new
                                        message</label>
                                </div>
                                <div class="form-check form-switch mb-2">
                                    <input class="form-check-input" type="checkbox" id="emailReviews" checked />
                                    <label class="form-check-label" for="emailReviews">Email me when I receive a
                                        review</label>
                                </div>
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="emailPromos" />
                                    <label class="form-check-label" for="emailPromos">Send me occasional product
                                        updates</label>
                                </div>
                            </div>
                            <div class="card-footer bg-white">
                                <button class="btn btn-outline-primary btn-sm" type="submit">Save Preferences</button>
                            </div>
                        </form>
                    </div>

                    <!-- Danger zone -->
                    <div class="col-12">
                        <div class="card border-danger-subtle shadow-sm">
                            <div class="card-body">
                                <h2 class="h6 text-danger mb-2">Danger Zone</h2>
                                <p class="mb-3 text-muted">Delete your account and all associated data. This action
                                    cannot be undone (prototype only).</p>
                                <button class="btn btn-outline-danger btn-sm"
                                    onclick="alert('Account deletion simulated.')">Delete Account</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- NEW: RATINGS TAB (Total ratings for this user) -->
            <section class="tab-pane fade" id="ratings" role="tabpanel" aria-labelledby="ratings-tab">
                <div class="row g-3">
                    <!-- Summary -->
                    <div class="col-lg-4">
                        <div class="card shadow-sm">
                            <div class="card-body">
                                <h2 class="h6 mb-2">Average Rating</h2>
                                <div class="d-flex align-items-center gap-2 mb-1">
                                    <span class="fs-3 fw-semibold" id="r-avg">0.0</span>
                                    <span class="text-muted">/ 5</span>
                                </div>
                                <div id="r-avg-stars" class="mb-2" aria-hidden="true"></div>
                                <div class="small text-muted"><span id="r-total">0</span> total ratings</div>
                            </div>
                        </div>

                        <div class="card shadow-sm mt-3">
                            <div class="card-body">
                                <h2 class="h6 mb-2">Distribution</h2>
                                <!-- 5 to 1 star bars -->
                                <div class="mb-2 d-flex align-items-center gap-2">
                                    <span class="small">5</span>
                                    <div class="progress flex-grow-1" style="height:8px;">
                                        <div class="progress-bar bg-warning" id="bar-5" style="width:0%"></div>
                                    </div>
                                    <span class="small text-muted" id="count-5">0</span>
                                </div>
                                <div class="mb-2 d-flex align-items-center gap-2">
                                    <span class="small">4</span>
                                    <div class="progress flex-grow-1" style="height:8px;">
                                        <div class="progress-bar bg-warning" id="bar-4" style="width:0%"></div>
                                    </div>
                                    <span class="small text-muted" id="count-4">0</span>
                                </div>
                                <div class="mb-2 d-flex align-items-center gap-2">
                                    <span class="small">3</span>
                                    <div class="progress flex-grow-1" style="height:8px;">
                                        <div class="progress-bar bg-warning" id="bar-3" style="width:0%"></div>
                                    </div>
                                    <span class="small text-muted" id="count-3">0</span>
                                </div>
                                <div class="mb-2 d-flex align-items-center gap-2">
                                    <span class="small">2</span>
                                    <div class="progress flex-grow-1" style="height:8px;">
                                        <div class="progress-bar bg-warning" id="bar-2" style="width:0%"></div>
                                    </div>
                                    <span class="small text-muted" id="count-2">0</span>
                                </div>
                                <div class="d-flex align-items-center gap-2">
                                    <span class="small">1</span>
                                    <div class="progress flex-grow-1" style="height:8px;">
                                        <div class="progress-bar bg-warning" id="bar-1" style="width:0%"></div>
                                    </div>
                                    <span class="small text-muted" id="count-1">0</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Recent reviews -->
                    <div class="col-lg-8">
                        <div class="card shadow-sm">
                            <div class="card-body">
                                <h2 class="h6 mb-3">Recent Reviews</h2>

                                <div class="list-group list-group-flush" id="r-list">
                                    <!-- injected rows -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-dark text-light text-center py-3 mt-4">
        <p class="mb-0">&copy; 2025 Craig List App</p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // --- Mock ratings for the profile's Ratings tab (replace with real data later) ---
        const ratingsData = [
            { id: 1, customer: 'John Doe', listing: 'Gaming Laptop', stars: 5, review: 'Excellent seller, fast shipping!', date: 'Sep 23, 2025' },
            { id: 2, customer: 'John Doe', listing: 'Gaming Laptop', stars: 4, review: 'Great seller, fast shipping!', date: 'Sep 1, 2025' },
            { id: 3, customer: 'Mary Smith', listing: 'Dining Table Set', stars: 3.5, review: 'Item was fine but delivery was late.', date: 'Aug 29, 2025' }
        ];

        function starHtml(value) {
            const full = Math.floor(value);
            const half = (value - full) >= 0.5 ? 1 : 0;
            const empty = 5 - full - half;
            let html = '';
            for (let i = 0; i < full; i++) html += '<i class="bi bi-star-fill rating-star"></i>';
            if (half) html += '<i class="bi bi-star-half rating-star"></i>';
            for (let i = 0; i < empty; i++) html += '<i class="bi bi-star rating-star"></i>';
            return html;
        }

        function renderRatingsTab() {
            if (!document.getElementById('ratings')) return;

            const total = ratingsData.length || 0;
            const avg = total ? Math.round((ratingsData.reduce((a, r) => a + r.stars, 0) / total) * 10) / 10 : 0;

            // Summary
            document.getElementById('r-avg').textContent = avg.toFixed(1);
            document.getElementById('r-avg-stars').innerHTML = starHtml(avg);
            document.getElementById('r-total').textContent = total;

            // Distribution
            const buckets = { 1: 0, 2: 0, 3: 0, 4: 0, 5: 0 };
            ratingsData.forEach(r => {
                const key = Math.round(r.stars);
                buckets[key] = (buckets[key] || 0) + 1;
            });
            [5, 4, 3, 2, 1].forEach(n => {
                const pct = total ? (buckets[n] / total) * 100 : 0;
                document.getElementById('bar-' + n).style.width = pct + '%';
                document.getElementById('count-' + n).textContent = buckets[n] || 0;
            });

            // Recent list
            const list = document.getElementById('r-list');
            list.innerHTML = ratingsData.map(r => `
                <div class="list-group-item px-0">
                    <div class="d-flex justify-content-between">
                        <div>
                            <strong>${r.customer}</strong>
                            <span class="text-muted small"> on ${r.listing}</span>
                            <div class="mt-1">${starHtml(r.stars)}</div>
                            <div class="review-snippet mt-1 text-muted">${r.review}</div>
                        </div>
                        <small class="text-muted">${r.date}</small>
                    </div>
                </div>
            `).join('');
        }

        // Render once DOM is ready
        document.addEventListener('DOMContentLoaded', renderRatingsTab);
        // Also render when the Ratings tab is first shown (if user switches to it later)
        const ratingsTab = document.getElementById('ratings-tab');
        if (ratingsTab) {
            ratingsTab.addEventListener('shown.bs.tab', renderRatingsTab);
        }
    </script>
</body>

</html>